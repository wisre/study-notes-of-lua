# lua介绍
   lua是一种扩展性的程序设计语言，不仅支持面向过程的程序设计，也对面向对象，面向函数以及数据驱动型的程序设计提供良好的支持，
它是一种功能强大而且轻量级的脚本语言，lua被当做一个api库来使用，这个api库完全使用c语言实现。

   作为一种扩展性的语言，lua是没有main函数的概念的，它是嵌在主程序里面的，主程序能够调用函数去执行lua代码片段，读写lua变量，以及注册能够被lua
调用的c函数，通过调用C函数，lua能够进一步的扩展自己的适用范围。lua套件里包含名为lua的主程序，通过用lua类库，提供了一个完全独立的lua解释器。

# lua基本语法
 这章主要是介绍lua的词法、语法和语义

## lua词法
 lua的标识符有字母、数字和下划线组成，但是不能以数字开头，这和其他的大多数程序设计语言的规则是一样的，标识符用来定义变量和关联数组的域。
lua的关键字如下，这下关键字不能够用来当做标识符。
<table>
    <tr>
      <td>and</td>
      <td>break</td>
      <td>do</td>
      <td>else</td>
      <td>elseif</td>
    </tr>
      <tr>
      <td>end</td>
      <td>false</td>
      <td>for</td>
      <td>function</td>
      <td>if</td>
    </tr>
      <tr>
      <td>in</td>
      <td>local</td>
      <td>nil</td>
      <td>not</td>
      <td>or</td>
    </tr>
      <tr>
      <td>repeat</td>
      <td>return</td>
      <td>then</td>
      <td>true</td>
      <td>util</td>
      <td>while</td>
      
    </tr>

</table>
  lua标识符是大小写敏感的，and是保留字，但是And和AND是有效的标识符，作为一个约定，以下划线开始接着是大写的字母的标识符被留作lua的内部全局变量。
  
  下表是lua的一些运算符：
  <table>
    <tr>
      <td>+</td>
      <td>-</td>
      <td>*</td>
      <td>/</td>
      <td>%</td>
      <td>^</td>
      <td>#</td>
    </tr>
    <tr>
      <td>==</td>
      <td>~=</td>
      <td><=</td>
      <td>>=</td>
      <td>\></td>
      <td>\<</td>
      <td>=</td>
    </tr>
    <tr>
      <td>(</td>
      <td>)</td>
      <td>{</td>
      <td>}</td>
      <td>[</td>
      <td>]</td>
    </tr>
    <tr>
      <td>;</td>
      <td>:</td>
      <td>,</td>
      <td>.</td>
      <td>..</td>
      <td>...</td>
    </tr>

</table>
  字符串通过单引号和双引号修饰，能够包含跟C语言类似的转义字符：'\a'、'\b'、'\f'、'\n'、'\r'、'\t'、'\v'、'\\'、'\"'、'\''，而且跟在反斜杠后面的一行会在字符串里产生一个换行符。字符串里面的字符也能用反斜杠家数字来表示，例如\ddd。
  
  字符串也能利用方括号通过长格式来定义，以一个左方括号开始中间有n个等号，然后再接一个左方括号，遇到了同样格式的右方括号则表示字符串结束。例如以[==[开始和]==]结束来表示一个字符串，在这种格式里面的字符串可以包含任何字符，不会被转义字符转义，也不理会其他的方括号格式。
数字常量能够用十进制部分和指数部分组成，例如3.14e2，也支持16进制的形式，需在常量前面加上0x。
注释已字符--开始，直到本行末尾，假如--后面接的是长格式的开始，则注释直到长格式的结束符为止。例如--[[ ***]]
      
## 值和类型
  lua是动态类型的语言，意味着它只有值，没有类型定义，所有的值带有它的类型，lua里所有的值都是first-class值，都能够被存储在变量里，
通过参数传递给其他函数或者当做返回值。

  在lua中有8中基本类型：Nil（空类型）、数值类型、布尔类型、字符串类型、函数、userdata、线程类型和关联表类型。Nil是值nil的类型，它代表不存在任何有意义的数据，布尔类型是false值和true值的类型，nil值和false值都是条件为否，其他的值条件为真。
Number代表着实数，字符串代表着字符数组，字符串能够包含任何8位的字符，包括空字符'\0'，lua能够调用用lua和c定义的函数。

  userdata类型用于存储任意的c数据，这个类型相当于一块原始内存，而且没有任何预定义操作方法。但是，程序员可以通过metatable为userdata类型的数据定义操作方法，在lua中userdata值
不能被创建和修改，只能够通过C的api来实现，这样就保证了主程序的数据完整性。

  thread类型表示一个独立的可执行的线程，被用来实现协同程序，不要把lua线程和操作系统的线程混淆，lua支持在所有的出操作系统上的协同程序，甚至是那些不支持线程的系统。
  
  table就是关联数组的类型，关联数据不仅能用数值作为索引，也能够以出了nil值以外的所有其他值当做索引，table类型能够包含任何类型的值，出了nil值，table是lua的唯一的数据结构机制，能够被用来定义普通数据，符号表，sets，记录，图等。为了表示records，lua用域值来当做索引，lua支持用a.name来表示a['name']。
  
  tables、userdata、thread和函数是对象，lua变量其实不能包含这些值，只能够引用它们，赋值、参数传递和返回值总是操作这些值的引用，不存在任何的值拷贝。
  
  库函数type可以返回给定值的类型描述，lua提供字符串类型和数值类型的自动转换，为了完全控制数值怎么转换成字符串类型，可以使用string函数来实现。
  
## 变量
  在lua中有三种类型的变量：全局变量，局部变量和table的域变量，单个标识符能够表示全局变量或者局部变量，假如没有特殊修饰，所有的变量都被假定为全局变量，除非在变量的前面有local保留字的修饰，局部变量能够在定义他们的函数里被随时的访问，在为变量赋值前，它的值是nil。
  
  方括号用来获取table类型的值，访问数组值t[i]也可以用gettable_event(t,i)来表示，全局变量作为普通table数组的域，叫做环境table，每个函数都有环境table的引用，以便函数里的全局变量能够指向环境变量表，当一个函数被创建，它继承创建它的函数的上下文信息，为了获取lua函数的环境表，能够调用getfenv函数，可以调用setfenv来设置环境表。可以通过_env.x方式访问全局变量，也可以用gettable_event(_env,"x")来访问。_env是函数的运行环境
  
# 语句
  
